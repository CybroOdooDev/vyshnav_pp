<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="variant_template_inherit"
              inherit_id="sale.variants">
        <xpath expr="//ul[@t-att-data-attribute_id='ptal.attribute_id.id']"
               position="replace">
            <ul t-att-data-attribute_id="ptal.attribute_id.id"
                t-attf-class="list-inline list-unstyled o_wsale_product_attribute #{'d-none' if single_and_custom else ''}">
                <t t-foreach="ptal.product_template_value_ids._only_active()"
                   t-as="ptav">
                    <t t-value="False" t-set="enable"/>
                    <t t-if="ptav.product_attribute_value_id.print_type == product.print_type">
                        <t t-value="True" t-set="enable"/>
                    </t>
                    <li class="list-inline-item mb-3 js_attribute_value"
                        style="margin: 0;">
                        <label class="col-form-label">
                            <div class="form-check">
                                <input type="radio"
                                       t-attf-class="form-check-input js_variant_change #{ptal.attribute_id.create_variant}"
                                       t-att-checked="enable"
                                       t-att-name="'ptal-%s' % ptal.id"
                                       t-att-value="ptav.id"
                                       t-att-data-value_id="ptav.id"
                                       t-att-data-value_name="ptav.name"
                                       t-att-data-attribute_name="ptav.attribute_id.name"
                                       t-att-data-is_custom="ptav.is_custom"
                                       t-att-data-is_single="single"
                                       t-att-data-is_single_and_custom="single_and_custom"/>
                                <div class="radio_input_value form-check-label">
                                    <span t-field="ptav.name"/>
                                    <t t-call="sale.badge_extra_price"/>
                                </div>
                            </div>
                        </label>
                    </li>
                </t>
            </ul>
        </xpath>
        <xpath expr="//ul[@t-att-data-attribute_id and contains(@t-att-data-attribute_id, 'ptal.attribute_id.id') and contains(@t-attf-class, 'o_wsale_product_attribute') and contains(@data-bs-toggle, 'buttons')]"
       position="replace">
            <ul t-att-data-attribute_id="ptal.attribute_id.id"
                t-attf-class="btn-group-toggle list-inline list-unstyled o_wsale_product_attribute #{'d-none' if single_and_custom else ''}"
                data-bs-toggle="buttons">
                <t t-foreach="ptal.product_template_value_ids._only_active()"
                   t-as="ptav">
                    <t t-value="False" t-set="enable"/>
                    <t t-if="ptav.product_attribute_value_id.print_type == product.print_type">
                        <t t-value="True" t-set="enable"/>
                    </t>
                    <li t-attf-class="o_variant_pills btn btn-primary mb-1 list-inline-item js_attribute_value #{'active' if ptav in combination else ''}">
                        <input type="radio"
                               t-attf-class="js_variant_change #{ptal.attribute_id.create_variant}"
                               t-att-checked="enable"
                               t-att-name="'ptal-%s' % ptal.id"
                               t-att-value="ptav.id"
                               t-att-data-value_id="ptav.id"
                               t-att-id="ptav.id"
                               t-att-data-value_name="ptav.name"
                               t-att-data-attribute_name="ptav.attribute_id.name"
                               t-att-data-is_custom="ptav.is_custom"
                               t-att-data-is_single_and_custom="single_and_custom"
                               t-att-autocomplete="off"/>
                        <label class="radio_input_value o_variant_pills_input_value"
                               t-att-for="ptav.id">
                            <span t-field="ptav.name"/>
                            <t t-call="sale.badge_extra_price"/>
                        </label>
                    </li>
                </t>
            </ul>
        </xpath>
        <xpath expr="//li[contains(@class, 'list-inline-item me-1')]"
               position="replace">
            <li t-foreach="ptal.product_template_value_ids._only_active()"
                t-as="ptav" class="list-inline-item me-1">
                <t t-value="False" t-set="enable"/>
                <t t-if="ptav.product_attribute_value_id.print_type == product.print_type">
                    <t t-value="True" t-set="enable"/>
                </t>
                <label t-attf-style="background-color:#{ptav.html_color or ptav.product_attribute_value_id.name if not ptav.is_custom else ''}"
                       t-attf-class="css_attribute_color #{'active' if ptav in combination else ''} #{'custom_value' if ptav.is_custom else ''} #{'transparent' if (not ptav.is_custom and not ptav.html_color) else ''}">
                    <input type="radio"
                           t-attf-class="js_variant_change  #{ptal.attribute_id.create_variant}"
                           t-att-checked="enable"
                           t-att-name="'ptal-%s' % ptal.id"
                           t-att-value="ptav.id"
                           t-att-title="ptav.name"
                           t-att-data-value_id="ptav.id"
                           t-att-data-value_name="ptav.name"
                           t-att-data-attribute_name="ptav.attribute_id.name"
                           t-att-data-is_custom="ptav.is_custom"
                           t-att-data-is_single="single"
                           t-att-data-is_single_and_custom="single_and_custom"/>
                </label>
            </li>
        </xpath>
        <xpath expr="//select[contains(@t-att-data-attribute_id, 'ptal.attribute_id.id') and contains(@t-attf-class, 'form-select css_attribute_select o_wsale_product_attribute') and @t-att-name]
" position="replace">
            <select
                    t-att-data-attribute_id="ptal.attribute_id.id"
                    t-attf-class="form-select css_attribute_select o_wsale_product_attribute js_variant_change #{ptal.attribute_id.create_variant} #{'d-none' if single_and_custom else ''}"
                    t-att-name="'ptal-%s' % ptal.id">
            <t t-foreach="ptal.product_template_value_ids._only_active()"
               t-as="ptav">
                <t t-value="False" t-set="enable"/>
                    <t t-if="ptav.product_attribute_value_id.print_type == product.print_type">
                        <t t-value="True" t-set="enable"/>
                    </t>
                <option t-att-value="ptav.id"
                        t-att-data-value_id="ptav.id"
                        t-att-data-value_name="ptav.name"
                        t-att-data-attribute_name="ptav.attribute_id.name"
                        t-att-data-is_custom="ptav.is_custom"
                        t-att-selected="enable"
                        t-att-data-is_single="single"
                        t-att-data-is_single_and_custom="single_and_custom">
                    <span t-field="ptav.name"/>
                    <t t-call="sale.badge_extra_price"/>
                </option>
            </t>
            </select>
        </xpath>
    </template>
</odoo>